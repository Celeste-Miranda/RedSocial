<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1">
  <meta name="description"
    content="">
  <meta name="author"
    content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator"
    content="Hugo 0.83.1">

  <link rel="icon"
    th:href="@{/iconos/iconoEgg.svg}">

  <title th:text="|${title} - SocialEgg|"></title>

  <link rel="canonical"
    href="https://getbootstrap.com/docs/5.0/examples/checkout/">



  <!-- Bootstrap core CSS -->
  <link th:href="@{/css/bootstrap.min.css}"
    rel="stylesheet">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>

  <link rel="stylesheet"
    th:href="@{/css/select2.min.css}">


  <!-- Custom styles for this template -->
  <link th:href="@{/css/signin.css}"
    rel="stylesheet">


</head>

<body class="bg-light">


  <div class="container">

    <div class="row py-5 text-center">
      <img class="d-block mx-auto mb-4"
        th:src="@{/iconos/logoFraseEgg.svg}"
        alt=""
        width="230"
        height="57">
      <h2>Bienvenido </h2>
      <p class="lead">Somos una organización que busca conectar personas a través de la cooperación.
        Pusimos en marcha un laboratorio social y aplicamos principios científicos de la Cooperación Humana.
        Así, creamos una tecnología que transforma grupos en verdaderos equipos. Hoy estamos listos para que
        el mundo la ponga en práctica.</p>
    </div>




    <div class="row col-md-7 col-lg-8">
      <h4 class="col-mb-3">Datos Personales</h4>



      <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${error}">
        <strong>¡Error!</strong> <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>


      <form class="needs-validation"
        enctype="multipart/form-data"
        novalidate
        th:action="@{/perfil/__${accion}__}"
        method="POST"
        th:object="${perfil}"
        autocomplete="off">
        <div class="row g-3">

          <input type="hidden"
            th:field="*{id}" />



          <div class="col-sm-6">
            <label for="Nombre"
              class="form-label">Nombre</label>
            <input type="text"
              class="form-control"
              id="Nombre"
              placeholder=""
              th:field="*{nombre}"
              value=""
              required>
            <div class="invalid-feedback">
              El nombre es obligatorio 
            </div>
          </div>

          <div class="col-sm-6">
            <label for="Apellido"
              class="form-label">Apellido</label>
            <input type="text"
              class="form-control"
              id="Apellido"
              placeholder=""
              th:field="*{apellido}"
              value=""
              required>
            <div class="invalid-feedback">
              El apellido es obligatorio 
            </div>
          </div>




          <div class="col-md-5">
            <label for="country"
              class="form-label">Provincia</label>
            <select class="form-select"
              id="provincias"
              name="residencia"
              required
              th:field="*{residencia}">
              <!-- <option value=""
                disabled
                selected>Elegi provincia</option> -->

            </select>
            <div class="invalid-feedback">
              Por favor seleccione una Residencia.
            </div>


          </div>




          <div class="col-md-5">
            <label for="tecnologias"
              class="form-label">Tecnologias</label>
            <select class="form-select"
              id="tecnologias"
              name="tecnologias"
              multiple="multiple"
              th:field="*{tecnologias}">
              <!--  <option value=""
                disabled
                selected>Elegir</option> -->

              <option th:each="nombre : ${listaTecnologia}"
                th:value="${nombre}"
                th:text="${nombre}">



              </option>
            </select>



          </div>


          <br><br>


          <div class="d-flex justify-content-between px-3 py-3 rounded-bottom"
            style="background-color: #EAEDED;">
            <label for="foto"
              id="labelFoto"
              class="btn btn-sm btn-warning"  > <img th:src="@{/iconos/image.svg}"> Cargar Foto Perfil</label>
            <input type="file"
              name="foto"
              id="foto"
              th:field="*{foto}"
              accept="image/*"
              hidden>

          </div>



          <button class="w-100 btn btn-yellow btn-lg"
            type="submit">Guardar</button>
      </form>

    </div>
  </div>













  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1">&copy; 2017–2021 EggSocial</p>

  </footer>
  </div>

  <script th:src="@{/js/bootstrap.bundle.min.js}">  </script>

  <script th:src="@{/js/form-validation.js}"></script>

  <script th:src="@{/js/jquery.js}"></script>
  <script th:src="@{/js/select2.min.js}"></script>
  <script th:inline="javascript">


    const provincias = document.getElementById("provincias");

    let perfil = [[${ perfil }]];


    (() => {
      const buscar = async () => {
        const url = "https://apis.datos.gob.ar/georef/api/provincias?campos=nombre&orden=nombre";
        const response = await fetch(url);
        return response.json();
      };

      buscar().then(data => {
        for (const provincia of data["provincias"]) {
          const option = document.createElement("option");
          option.value = provincia["nombre"];
          option.innerText = provincia["nombre"];
          provincias.appendChild(option);


          if (perfil["residencia"] == option.value) {
            option.setAttribute("selected", "");

          }




        }
      })
    })();





  </script>


  <script>
    $(document).ready(function () {
      $("#tecnologias").select2({
        placeholder: "Selecciona algo",
        allowClear: true,
        tokenSeparators: [',', ' ']
      });
      $("#provincias").select2({
        placeholder: "selecciona una provincia",
        maximumSelectionLength: 1,
        allowClear: true
      });
    });



  </script>



</body>

</html>